# Complete Functional Implementation for Asbeza365

I'll enhance the HTML file to make all features fully functional, including dark mode, user authentication, cart functionality, and all interactive elements. Here's the complete implementation:

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Asbeza365 - Grocery Price Comparison</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Material Design inspired mobile app styles */
        :root {
            --primary: #056D30;
            --primary-light: #E8F5E9;
            --primary-dark: #034D21;
            --secondary: #F0B429;
            --error: #E74C3C;
            --success: #2E7D32;
            --text-primary: #212121;
            --text-secondary: #757575;
            --background: #FFFFFF;
            --surface: #F5F5F5;
            --border: #E0E0E0;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.12);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
            --elevation-1: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            --elevation-2: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
            --elevation-3: 0 10px 20px rgba(0,0,0,0.1);
        }

        /* Dark mode variables */
        [data-theme="dark"] {
            --primary: #4CAF50;
            --primary-light: #1E1E1E;
            --primary-dark: #81C784;
            --text-primary: #E0E0E0;
            --text-secondary: #9E9E9E;
            --background: #121212;
            --surface: #1E1E1E;
            --border: #424242;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.5);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.4);
            --elevation-1: 0 1px 3px rgba(0,0,0,0.5), 0 1px 2px rgba(0,0,0,0.6);
            --elevation-2: 0 3px 6px rgba(0,0,0,0.4), 0 3px 6px rgba(0,0,0,0.5);
            --elevation-3: 0 10px 20px rgba(0,0,0,0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            color: var(--text-primary);
            background-color: var(--background);
            line-height: 1.5;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transition: background-color 0.3s, color 0.3s;
        }

        /* App Container */
        .app-container {
            max-width: 100%;
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            background-color: var(--surface);
            transition: background-color 0.3s;
        }

        /* App Header */
        .app-header {
            position: sticky;
            top: 0;
            z-index: 100;
            background-color: var(--primary);
            color: white;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: var(--elevation-1);
        }

        .header-left, .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .app-logo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
        }

        .header-title {
            font-size: 1.2rem;
            font-weight: 500;
        }

        .header-icon {
            font-size: 1.5rem;
            color: white;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--background);
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
            z-index: 100;
            transition: background-color 0.3s;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--text-secondary);
            font-size: 0.75rem;
            padding: 4px 8px;
            transition: color 0.3s;
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-icon {
            font-size: 1.5rem;
            margin-bottom: 4px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 16px;
            padding-bottom: 72px; /* Space for bottom nav */
            overflow-y: auto;
        }

        /* Search Bar */
        .search-container {
            margin-bottom: 16px;
            position: relative;
        }

        .search-bar {
            width: 100%;
            padding: 12px 16px;
            padding-left: 48px;
            border-radius: 24px;
            border: none;
            background-color: var(--background);
            box-shadow: var(--shadow-sm);
            font-size: 1rem;
            outline: none;
            color: var(--text-primary);
            transition: background-color 0.3s, color 0.3s, box-shadow 0.3s;
        }

        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            transition: color 0.3s;
        }

        /* Categories */
        .section-title {
            font-size: 1.2rem;
            font-weight: 500;
            margin: 16px 0 12px;
            color: var(--text-primary);
            transition: color 0.3s;
        }

        .categories-container {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            padding-bottom: 8px;
            margin-bottom: 16px;
            -webkit-overflow-scrolling: touch;
        }

        .category-card {
            min-width: 120px;
            background-color: var(--background);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: var(--text-primary);
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .category-image {
            width: 100%;
            height: 80px;
            object-fit: cover;
        }

        .category-name {
            padding: 8px;
            font-size: 0.9rem;
            text-align: center;
        }

        /* Product Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }

        .product-card {
            background-color: var(--background);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: transform 0.2s, box-shadow 0.2s, background-color 0.3s;
        }

        .product-card:active {
            transform: scale(0.98);
            box-shadow: var(--elevation-1);
        }

        .product-image-container {
            position: relative;
            height: 120px;
            overflow: hidden;
        }

        .product-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }

        .product-card:hover .product-image {
            transform: scale(1.05);
        }

        .product-badge {
            position: absolute;
            top: 8px;
            left: 8px;
            background-color: var(--error);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 500;
        }

        .product-content {
            padding: 12px;
        }

        .product-name {
            font-size: 0.9rem;
            margin-bottom: 8px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            color: var(--text-primary);
            transition: color 0.3s;
        }

        .product-price {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .product-original-price {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-decoration: line-through;
            margin-right: 4px;
            transition: color 0.3s;
        }

        .product-store {
            display: flex;
            align-items: center;
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 8px;
            transition: color 0.3s;
        }

        .store-logo {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 6px;
        }

        .add-to-cart {
            width: 100%;
            padding: 8px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 4px;
            margin-top: 8px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        /* Deals Section */
        .deals-container {
            margin-bottom: 24px;
        }

        .deal-card {
            background-color: var(--background);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            margin-bottom: 16px;
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .deal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background-color: var(--primary-light);
            transition: background-color 0.3s;
        }

        .deal-title {
            font-weight: 500;
            color: var(--primary);
        }

        .deal-countdown {
            font-size: 0.8rem;
            color: var(--error);
            font-weight: 500;
        }

        .deal-products {
            padding: 12px;
        }

        /* Price Comparison */
        .comparison-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .view-all {
            font-size: 0.9rem;
            color: var(--primary);
            text-decoration: none;
        }

        /* Login/Signup Form */
        .auth-container {
            max-width: 100%;
            padding: 24px 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .auth-card {
            width: 100%;
            max-width: 400px;
            background-color: var(--background);
            border-radius: 12px;
            padding: 24px;
            box-shadow: var(--elevation-2);
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .auth-title {
            font-size: 1.5rem;
            margin-bottom: 24px;
            text-align: center;
            color: var(--primary);
        }

        .auth-form .form-group {
            margin-bottom: 16px;
        }

        .auth-form label {
            display: block;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            transition: color 0.3s;
        }

        .auth-form input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 1rem;
            background-color: var(--background);
            color: var(--text-primary);
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }

        .auth-form button {
            width: 100%;
            padding: 12px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 500;
            margin-top: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .auth-switch {
            text-align: center;
            margin-top: 16px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            transition: color 0.3s;
        }

        .auth-switch a {
            color: var(--primary);
            text-decoration: none;
        }

        /* Cart Page */
        .cart-container {
            padding-bottom: 80px;
        }

        .cart-item {
            display: flex;
            background-color: var(--background);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 12px;
            box-shadow: var(--shadow-sm);
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .cart-item-image {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
            margin-right: 12px;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 500;
            margin-bottom: 4px;
            color: var(--text-primary);
            transition: color 0.3s;
        }

        .cart-item-store {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
            transition: color 0.3s;
        }

        .cart-item-price {
            font-weight: 700;
            color: var(--primary);
        }

        .cart-item-actions {
            display: flex;
            align-items: center;
            margin-top: 8px;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            margin-right: 16px;
        }

        .quantity-btn {
            width: 28px;
            height: 28px;
            border: 1px solid var(--border);
            background-color: var(--background);
            color: var(--text-primary);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }

        .quantity-value {
            margin: 0 8px;
            min-width: 20px;
            text-align: center;
            color: var(--text-primary);
            transition: color 0.3s;
        }

        .remove-item {
            color: var(--error);
            font-size: 1.2rem;
            background: none;
            border: none;
            cursor: pointer;
        }

        .cart-summary {
            background-color: var(--background);
            border-radius: 12px;
            padding: 16px;
            margin-top: 16px;
            box-shadow: var(--shadow-sm);
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-primary);
            transition: color 0.3s;
        }

        .summary-total {
            font-weight: 700;
            font-size: 1.1rem;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid var(--border);
            transition: border-color 0.3s;
        }

        .checkout-btn {
            width: 100%;
            padding: 12px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 500;
            margin-top: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        /* Product Detail Page */
        .product-detail-container {
            padding-bottom: 80px;
        }

        .product-detail-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .product-detail-content {
            background-color: var(--background);
            border-radius: 16px 16px 0 0;
            padding: 16px;
            margin-top: -20px;
            position: relative;
            z-index: 1;
            transition: background-color 0.3s;
        }

        .product-detail-name {
            font-size: 1.3rem;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text-primary);
            transition: color 0.3s;
        }

        .product-detail-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 16px;
        }

        .product-detail-original {
            font-size: 1rem;
            color: var(--text-secondary);
            text-decoration: line-through;
            margin-right: 8px;
            transition: color 0.3s;
        }

        .product-detail-discount {
            background-color: var(--error);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .product-detail-store {
            display: flex;
            align-items: center;
            margin: 16px 0;
        }

        .store-logo-large {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 12px;
        }

        .store-info h4 {
            font-weight: 500;
            margin-bottom: 2px;
            color: var(--text-primary);
            transition: color 0.3s;
        }

        .store-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            transition: color 0.3s;
        }

        .product-detail-actions {
            display: flex;
            gap: 12px;
            margin: 24px 0;
        }

        .add-to-cart-large {
            flex: 1;
            padding: 12px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .wishlist-btn {
            width: 50px;
            height: 50px;
            border: 1px solid var(--border);
            background-color: var(--background);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: background-color 0.3s, border-color 0.3s, color 0.3s;
        }

        .wishlist-btn.active {
            color: var(--error);
        }

        .product-detail-description {
            margin: 16px 0;
            line-height: 1.6;
            color: var(--text-primary);
            transition: color 0.3s;
        }

        /* Tab Navigation */
        .tab-container {
            display: flex;
            border-bottom: 1px solid var(--border);
            margin-bottom: 16px;
            transition: border-color 0.3s;
        }

        .tab {
            padding: 12px 16px;
            font-weight: 500;
            color: var(--text-secondary);
            position: relative;
            cursor: pointer;
            transition: color 0.3s;
        }

        .tab.active {
            color: var(--primary);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 2px;
            background-color: var(--primary);
        }

        /* Price Comparison Table */
        .price-comparison-table {
            width: 100%;
            border-collapse: collapse;
        }

        .price-comparison-table th {
            text-align: left;
            padding: 8px 0;
            font-weight: 500;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border);
            transition: color 0.3s, border-color 0.3s;
        }

        .price-comparison-table td {
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
            color: var(--text-primary);
            transition: color 0.3s, border-color 0.3s;
        }

        .best-price {
            color: var(--primary);
            font-weight: 700;
        }

        /* Delivery Page */
        .delivery-status {
            background-color: var(--background);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .status-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .status-title {
            font-weight: 500;
            color: var(--text-primary);
            transition: color 0.3s;
        }

        .status-time {
            font-size: 0.9rem;
            color: var(--text-secondary);
            transition: color 0.3s;
        }

        .status-steps {
            position: relative;
            padding-left: 24px;
        }

        .status-step {
            position: relative;
            padding-bottom: 24px;
        }

        .status-step:last-child {
            padding-bottom: 0;
        }

        .status-step::before {
            content: '';
            position: absolute;
            left: -18px;
            top: 4px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: var(--border);
            z-index: 1;
            transition: background-color 0.3s;
        }

        .status-step.active::before {
            background-color: var(--primary);
        }

        .status-step.completed::before {
            background-color: var(--success);
        }

        .status-step::after {
            content: '';
            position: absolute;
            left: -13px;
            top: 16px;
            bottom: -8px;
            width: 2px;
            background-color: var(--border);
            transition: background-color 0.3s;
        }

        .status-step:last-child::after {
            display: none;
        }

        .status-step.completed::after {
            background-color: var(--success);
        }

        .status-label {
            font-weight: 500;
            margin-bottom: 4px;
            color: var(--text-primary);
            transition: color 0.3s;
        }

        .status-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            transition: color 0.3s;
        }

        .delivery-map {
            width: 100%;
            height: 200px;
            background-color: var(--surface);
            border-radius: 12px;
            margin: 16px 0;
            overflow: hidden;
            transition: background-color 0.3s;
        }

        .delivery-driver {
            display: flex;
            align-items: center;
            background-color: var(--background);
            border-radius: 12px;
            padding: 12px;
            box-shadow: var(--shadow-sm);
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .driver-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 12px;
        }

        .driver-info h4 {
            font-weight: 500;
            margin-bottom: 4px;
            color: var(--text-primary);
            transition: color 0.3s;
        }

        .driver-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            transition: color 0.3s;
        }

        .driver-actions {
            margin-left: auto;
            display: flex;
            gap: 8px;
        }

        .driver-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-light);
            color: var(--primary);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
        }

        /* Profile Page */
        .profile-header {
            display: flex;
            align-items: center;
            background-color: var(--background);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 16px;
        }

        .profile-info h2 {
            font-weight: 500;
            margin-bottom: 4px;
            color: var(--text-primary);
            transition: color 0.3s;
        }

        .profile-info p {
            color: var(--text-secondary);
            transition: color 0.3s;
        }

        .profile-menu {
            background-color: var(--background);
            border-radius: 12px;
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 16px;
            text-decoration: none;
            color: var(--text-primary);
            border-bottom: 1px solid var(--border);
            transition: color 0.3s, border-color 0.3s;
        }

        .menu-item:last-child {
            border-bottom: none;
        }

        .menu-icon {
            width: 24px;
            height: 24px;
            margin-right: 16px;
            color: var(--text-secondary);
            transition: color 0.3s;
        }

        .menu-text {
            flex: 1;
        }

        .menu-arrow {
            color: var(--text-secondary);
            transition: color 0.3s;
        }

        /* Orders Page */
        .orders-container {
            padding-bottom: 80px;
        }

        .order-card {
            background-color: var(--background);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .order-number {
            font-weight: 500;
            color: var(--text-primary);
            transition: color 0.3s;
        }

        .order-date {
            font-size: 0.9rem;
            color: var(--text-secondary);
            transition: color 0.3s;
        }

        .order-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-bottom: 12px;
        }

        .status-delivered {
            background-color: var(--primary-light);
            color: var(--primary);
            transition: background-color 0.3s, color 0.3s;
        }

        .status-processing {
            background-color: #FFF3E0;
            color: #E65100;
        }

        .status-cancelled {
            background-color: #FFEBEE;
            color: var(--error);
        }

        .order-products {
            display: flex;
            margin-bottom: 12px;
            overflow-x: auto;
            gap: 8px;
        }

        .order-product-image {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
        }

        .order-summary {
            display: flex;
            justify-content: space-between;
            padding-top: 12px;
            border-top: 1px solid var(--border);
            transition: border-color 0.3s;
        }

        .order-total {
            font-weight: 500;
            color: var(--text-primary);
            transition: color 0.3s;
        }

        .order-action {
            color: var(--primary);
            font-weight: 500;
            text-decoration: none;
        }

        /* Addresses Page */
        .addresses-container {
            padding-bottom: 80px;
        }

        .address-card {
            background-color: var(--background);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
            position: relative;
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .address-default {
            position: absolute;
            top: 16px;
            right: 16px;
            background-color: var(--primary-light);
            color: var(--primary);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
            transition: background-color 0.3s, color 0.3s;
        }

        .address-name {
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text-primary);
            transition: color 0.3s;
        }

        .address-details {
            color: var(--text-secondary);
            margin-bottom: 12px;
            line-height: 1.5;
            transition: color 0.3s;
        }

        .address-phone {
            margin-top: 8px;
        }

        .address-actions {
            display: flex;
            gap: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
            transition: border-color 0.3s;
        }

        .address-action {
            color: var(--primary);
            font-weight: 500;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .add-address-btn {
            width: 100%;
            padding: 12px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 500;
            margin-top: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        /* Wishlist Page */
        .wishlist-container {
            padding-bottom: 80px;
        }

        .wishlist-empty {
            text-align: center;
            padding: 40px 0;
        }

        .wishlist-empty-icon {
            font-size: 3rem;
            color: var(--text-secondary);
            margin-bottom: 16px;
            transition: color 0.3s;
        }

        .wishlist-empty-text {
            color: var(--text-secondary);
            margin-bottom: 16px;
            transition: color 0.3s;
        }

        /* Settings Page */
        .settings-container {
            padding-bottom: 80px;
        }

        .settings-group {
            background-color: var(--background);
            border-radius: 12px;
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .settings-group-title {
            padding: 16px;
            font-weight: 500;
            border-bottom: 1px solid var(--border);
            color: var(--text-primary);
            transition: color 0.3s, border-color 0.3s;
        }

        .settings-item {
            display: flex;
            align-items: center;
            padding: 16px;
            text-decoration: none;
            color: var(--text-primary);
            border-bottom: 1px solid var(--border);
            transition: color 0.3s, border-color 0.3s;
        }

        .settings-item:last-child {
            border-bottom: none;
        }

        .settings-icon {
            width: 24px;
            height: 24px;
            margin-right: 16px;
            color: var(--text-secondary);
            transition: color 0.3s;
        }

        .settings-text {
            flex: 1;
        }

        .settings-value {
            color: var(--text-secondary);
            margin-right: 8px;
            transition: color 0.3s;
        }

        /* Checkout Page */
        .checkout-container {
            padding-bottom: 80px;
        }

        .checkout-section {
            background-color: var(--background);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .checkout-section-title {
            font-weight: 500;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: var(--text-primary);
            transition: color 0.3s;
        }

        .checkout-edit {
            color: var(--primary);
            font-size: 0.9rem;
            font-weight: 500;
            text-decoration: none;
        }

        .payment-method {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
            transition: border-color 0.3s;
        }

        .payment-method:last-child {
            border-bottom: none;
        }

        .payment-icon {
            width: 24px;
            height: 24px;
            margin-right: 12px;
            color: var(--text-secondary);
            transition: color 0.3s;
        }

        .payment-text {
            flex: 1;
            color: var(--text-primary);
            transition: color 0.3s;
        }

        .payment-radio {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border);
            border-radius: 50%;
            margin-left: 12px;
            transition: border-color 0.3s;
        }

        .payment-radio.selected {
            border-color: var(--primary);
            background-color: var(--primary);
        }

        /* Responsive Adjustments */
        @media (min-width: 768px) {
            .app-container {
                max-width: 450px;
                margin: 0 auto;
                box-shadow: 0 0 20px rgba(0,0,0,0.1);
                min-height: 90vh;
                max-height: 90vh;
                margin-top: 5vh;
                border-radius: 16px;
                overflow: hidden;
            }
            
            .main-content {
                padding-bottom: 80px;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mt-1 { margin-top: 4px; }
        .mt-2 { margin-top: 8px; }
        .mt-3 { margin-top: 12px; }
        .mt-4 { margin-top: 16px; }
        .mb-1 { margin-bottom: 4px; }
        .mb-2 { margin-bottom: 8px; }
        .mb-3 { margin-bottom: 12px; }
        .mb-4 { margin-bottom: 16px; }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- App Header -->
        <header class="app-header">
            <div class="header-left">
                <div class="app-logo">
                    <img src="./Icon365.PNG" alt="Asbeza365" class="logo-icon">
                    <span class="header-title">Asbeza365</span>
                </div>
            </div>
            <div class="header-right">
                <i class="fas fa-search header-icon" id="headerSearch"></i>
                <i class="fas fa-shopping-cart header-icon" id="headerCart"></i>
            </div>
        </header>

        <!-- Main Content (changes based on navigation) -->
        <main class="main-content" id="mainContent">
            <!-- Home Page Content -->
            <div class="page-content" id="homePage">
                <!-- Search Bar -->
                <div class="search-container">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-bar" placeholder="Search for products..." id="homeSearch">
                </div>

                <!-- Categories -->
                <h2 class="section-title">Categories</h2>
                <div class="categories-container">
                    <a href="#" class="category-card" data-category="fruits">
                        <img src="https://images.unsplash.com/photo-1518977676601-b53f82aba655?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Fruits" class="category-image">
                        <span class="category-name">Fruits</span>
                    </a>
                    <a href="#" class="category-card" data-category="vegetables">
                        <img src="https://images.unsplash.com/photo-1594282418426-62d45d1ea597?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Vegetables" class="category-image">
                        <span class="category-name">Vegetables</span>
                    </a>
                    <a href="#" class="category-card" data-category="dairy">
                        <img src="https://images.unsplash.com/photo-1550583724-b2692b85b150?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Dairy" class="category-image">
                        <span class="category-name">Dairy</span>
                    </a>
                    <a href="#" class="category-card" data-category="meat">
                        <img src="https://images.unsplash.com/photo-1606787366850-de6330128bfc?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Meat" class="category-image">
                        <span class="category-name">Meat</span>
                    </a>
                    <a href="#" class="category-card" data-category="beverages">
                        <img src="https://images.unsplash.com/photo-1550583724-b2692b85b150?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Beverages" class="category-image">
                        <span class="category-name">Beverages</span>
                    </a>
                </div>

                <!-- Flash Deals -->
                <div class="deals-container">
                    <div class="comparison-header">
                        <h2 class="section-title">Today's Deals</h2>
                        <a href="#" class="view-all" id="viewAllDeals">View All</a>
                    </div>
                    
                    <div class="deal-card">
                        <div class="deal-header">
                            <span class="deal-title">Summer Sale</span>
                            <span class="deal-countdown" id="dealCountdown">Ends in 4:32:15</span>
                        </div>
                        <div class="deal-products">
                            <div class="products-grid">
                                <div class="product-card" data-product="1">
                                    <div class="product-image-container">
                                        <img src="https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Product" class="product-image">
                                        <span class="product-badge">-25%</span>
                                    </div>
                                    <div class="product-content">
                                        <h3 class="product-name">Fresh Mangoes (1kg)</h3>
                                        <div class="product-price">
                                            <span class="product-original-price">145 ETB</span>
                                            105 ETB
                                        </div>
                                        <div class="product-store">
                                            <img src="https://via.placeholder.com/40" alt="Store" class="store-logo">
                                            <span>Fresh Corner</span>
                                        </div>
                                        <button class="add-to-cart" data-product-id="1">
                                            <i class="fas fa-cart-plus"></i> Add
                                        </button>
                                    </div>
                                </div>
                                <div class="product-card" data-product="2">
                                    <div class="product-image-container">
                                        <img src="https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Product" class="product-image">
                                        <span class="product-badge">-15%</span>
                                    </div>
                                    <div class="product-content">
                                        <h3 class="product-name">Bananas (Bunch)</h3>
                                        <div class="product-price">
                                            <span class="product-original-price">85 ETB</span>
                                            72 ETB
                                        </div>
                                        <div class="product-store">
                                            <img src="https://via.placeholder.com/40" alt="Store" class="store-logo">
                                            <span>Green Market</span>
                                        </div>
                                        <button class="add-to-cart" data-product-id="2">
                                            <i class="fas fa-cart-plus"></i> Add
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Popular Products -->
                <div class="comparison-header">
                    <h2 class="section-title">Compare Prices</h2>
                    <a href="#" class="view-all" id="viewAllProducts">View All</a>
                </div>
                
                <div class="products-grid">
                    <div class="product-card" data-product="3">
                        <div class="product-image-container">
                            <img src="https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Product" class="product-image">
                        </div>
                        <div class="product-content">
                            <h3 class="product-name">Abyssinia Oil (1L)</h3>
                            <div class="product-price">89 ETB</div>
                            <div class="product-store">
                                <img src="https://via.placeholder.com/40" alt="Store" class="store-logo">
                                <span>Selam Supermarket</span>
                            </div>
                            <button class="add-to-cart" data-product-id="3">
                                <i class="fas fa-cart-plus"></i> Add
                            </button>
                        </div>
                    </div>
                    <div class="product-card" data-product="4">
                        <div class="product-image-container">
                            <img src="https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Product" class="product-image">
                            <span class="product-badge">Best Deal</span>
                        </div>
                        <div class="product-content">
                            <h3 class="product-name">Mama Pasta (500g)</h3>
                            <div class="product-price">
                                <span class="product-original-price">45 ETB</span>
                                38 ETB
                            </div>
                            <div class="product-store">
                                <img src="https://via.placeholder.com/40" alt="Store" class="store-logo">
                                <span>Family Supermarket</span>
                            </div>
                            <button class="add-to-cart" data-product-id="4">
                                <i class="fas fa-cart-plus"></i> Add
                            </button>
                        </div>
                    </div>
                    <div class="product-card" data-product="5">
                        <div class="product-image-container">
                            <img src="https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Product" class="product-image">
                        </div>
                        <div class="product-content">
                            <h3 class="product-name">Ambo Mineral Water (1L)</h3>
                            <div class="product-price">25 ETB</div>
                            <div class="product-store">
                                <img src="https://via.placeholder.com/40" alt="Store" class="store-logo">
                                <span>Kaldis Supermarket</span>
                            </div>
                            <button class="add-to-cart" data-product-id="5">
                                <i class="fas fa-cart-plus"></i> Add
                            </button>
                        </div>
                    </div>
                    <div class="product-card" data-product="6">
                        <div class="product-image-container">
                            <img src="https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Product" class="product-image">
                        </div>
                        <div class="product-content">
                            <h3 class="product-name">Fresh Milk (1L)</h3>
                            <div class="product-price">42 ETB</div>
                            <div class="product-store">
                                <img src="https://via.placeholder.com/40" alt="Store" class="store-logo">
                                <span>Shola Market</span>
                            </div>
                            <button class="add-to-cart" data-product-id="6">
                                <i class="fas fa-cart-plus"></i> Add
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Search Page Content -->
            <div class="page-content hidden" id="searchPage">
                <div class="search-container">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-bar" placeholder="Search for products..." id="searchInput" autofocus>
                </div>
                
                <div class="recent-searches">
                    <h2 class="section-title">Recent Searches</h2>
                    <div class="search-tags" id="recentSearches">
                        <span class="search-tag">Mango</span>
                        <span class="search-tag">Oil</span>
                        <span class="search-tag">Pasta</span>
                        <span class="search-tag">Milk</span>
                    </div>
                </div>
                
                <div class="search-results" id="searchResults">
                    <!-- Results will be populated here -->
                </div>
            </div>

            <!-- Category Products Page -->
            <div class="page-content hidden" id="categoryPage">
                <div class="category-header">
                    <h2 class="section-title" id="categoryTitle">Fruits</h2>
                </div>
                
                <div class="products-grid" id="categoryProducts">
                    <!-- Products will be populated here -->
                </div>
            </div>

            <!-- All Deals Page -->
            <div class="page-content hidden" id="dealsPage">
                <h2 class="section-title">Today's Deals</h2>
                
                <div class="deal-card">
                    <div class="deal-header">
                        <span class="deal-title">Summer Sale</span>
                        <span class="deal-countdown">Ends in 4:32:15</span>
                    </div>
                    <div class="deal-products">
                        <div class="products-grid">
                            <div class="product-card" data-product="1">
                                <div class="product-image-container">
                                    <img src="https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Product" class="product-image">
                                    <span class="product-badge">-25%</span>
                                </div>
                                <div class="product-content">
                                    <h3 class="product-name">Fresh Mangoes (1kg)</h3>
                                    <div class="product-price">
                                        <span class="product-original-price">145 ETB</span>
                                        105 ETB
                                    </div>
                                    <div class="product-store">
                                        <img src="https://via.placeholder.com/40" alt="Store" class="store-logo">
                                        <span>Fresh Corner</span>
                                    </div>
                                    <button class="add-to-cart" data-product-id="1">
                                        <i class="fas fa-cart-plus"></i> Add
                                    </button>
                                </div>
                            </div>
                            <div class="product-card" data-product="2">
                                <div class="product-image-container">
                                    <img src="https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Product" class="product-image">
                                    <span class="product-badge">-15%</span>
                                </div>
                                <div class="product-content">
                                    <h3 class="product-name">Bananas (Bunch)</h3>
                                    <div class="product-price">
                                        <span class="product-original-price">85 ETB</span>
                                        72 ETB
                                    </div>
                                    <div class="product-store">
                                        <img src="https://via.placeholder.com/40" alt="Store" class="store-logo">
                                        <span>Green Market</span>
                                    </div>
                                    <button class="add-to-cart" data-product-id="2">
                                        <i class="fas fa-cart-plus"></i> Add
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="deal-card">
                    <div class="deal-header">
                        <span class="deal-title">Weekend Special</span>
                        <span class="deal-countdown">Ends in 1:22:45</span>
                    </div>
                    <div class="deal-products">
                        <div class="products-grid">
                            <div class="product-card" data-product="7">
                                <div class="product-image-container">
                                    <img src="https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Product" class="product-image">
                                    <span class="product-badge">-30%</span>
                                </div>
                                <div class="product-content">
                                    <h3 class="product-name">Avocados (4pcs)</h3>
                                    <div class="product-price">
                                        <span class="product-original-price">120 ETB</span>
                                        84 ETB
                                    </div>
                                    <div class="product-store">
                                        <img src="https://via.placeholder.com/40" alt="Store" class="store-logo">
                                        <span>Organic Farm</span>
                                    </div>
                                    <button class="add-to-cart" data-product-id="7">
                                        <i class="fas fa-cart-plus"></i> Add
                                    </button>
                                </div>
                            </div>
                            <div class="product-card" data-product="8">
                                <div class="product-image-container">
                                    <img src="https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Product" class="product-image">
                                    <span class="product-badge">-20%</span>
                                </div>
                                <div class="product-content">
                                    <h3 class="product-name">Chicken Breast (1kg)</h3>
                                    <div class="product-price">
                                        <span class="product-original-price">210 ETB</span>
                                        168 ETB
                                    </div>
                                    <div class="product-store">
                                        <img src="https://via.placeholder.com/40" alt="Store" class="store-logo">
                                        <span>Meat Master</span>
                                    </div>
                                    <button class="add-to-cart" data-product-id="8">
                                        <i class="fas fa-cart-plus"></i> Add
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- All Products Page -->
            <div class="page-content hidden" id="productsPage">
                <h2 class="section-title">All Products</h2>
                
                <div class="products-grid">
                    <div class="product-card" data-product="3">
                        <div class="product-image-container">
                            <img src="https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Product" class="product-image">
                        </div>
                        <div class="product-content">
                            <h3 class="product-name">Abyssinia Oil (1L)</h3>
                            <div class="product-price">89 ETB</div>
                            <div class="product-store">
                                <img src="https://via.placeholder.com/40" alt="Store" class="store-logo">
                                <span>Selam Supermarket</span>
                            </div>
                            <button class="add-to-cart" data-product-id="3">
                                <i class="fas fa-cart-plus"></i> Add
                            </button>
                        </div>
                    </div>
                    <div class="product-card" data-product="4">
                        <div class="product-image-container">
                            <img src="https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Product" class="product-image">
                            <span class="product-badge">Best Deal</span>
                        </div>
                        <div class="product-content">
                            <h3 class="product-name">Mama Pasta (500g)</h3>
                            <div class="product-price">
                                <span class="product-original-price">45 ETB</span>
                                38 ETB
                            </div>
                            <div class="product-store">
                                <img src="https://via.placeholder.com/40" alt="Store" class="store-logo">
                                <span>Family Supermarket</span>
                            </div>
                            <button class="add-to-cart" data-product-id="4">
                                <i class="fas fa-cart-plus"></i> Add
                            </button>
                        </div>
                    </div>
                    <div class="product-card" data-product="5">
                        <div class="product-image-container">
                            <img src="https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Product" class="product-image">
                        </div>
                        <div class="product-content">
                            <h3 class="product-name">Ambo Mineral Water (1L)</h3>
                            <div class="product-price">25 ETB</div>
                            <div class="product-store">
                                <img src="https://via.placeholder.com/40" alt="Store" class="store-logo">
                                <span>Kaldis Supermarket</span>
                            </div>
                            <button class="add-to-cart" data-product-id="5">
                                <i class="fas fa-cart-plus"></i> Add
                            </button>
                        </div>
                    </div>
                    <div class="product-card" data-product="6">
                        <div class="product-image-container">
                            <img src="https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Product" class="product-image">
                        </div>
                        <div class="product-content">
                            <h3 class="product-name">Fresh Milk (1L)</h3>
                            <div class="product-price">42 ETB</div>
                            <div class="product-store">
                                <img src="https://via.placeholder.com/40" alt="Store" class="store-logo">
                                <span>Shola Market</span>
                            </div>
                            <button class="add-to-cart" data-product-id="6">
                                <i class="fas fa-cart-plus"></i> Add
                            </button>
                        </div>
                    </div>
                    <div class="product-card" data-product="9">
                        <div class="product-image-container">
                            <img src="https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Product" class="product-image">
                        </div>
                        <div class="product-content">
                            <h3 class="product-name">Tomatoes (1kg)</h3>
                            <div class="product-price">35 ETB</div>
                            <div class="product-store">
                                <img src="https://via.placeholder.com/40" alt="Store" class="store-logo">
                                <span>Local Market</span>
                            </div>
                            <button class="add-to-cart" data-product-id="9">
                                <i class="fas fa-cart-plus"></i> Add
                            </button>
                        </div>
                    </div>
                    <div class="product-card" data-product="10">
                        <div class="product-image-container">
                            <img src="https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Product" class="product-image">
                            <span class="product-badge">-10%</span>
                        </div>
                        <div class="product-content">
                            <h3 class="product-name">Eggs (30pcs)</h3>
                            <div class="product-price">
                                <span class="product-original-price">120 ETB</span>
                                108 ETB
                            </div>
                            <div class="product-store">
                                <img src="https://via.placeholder.com/40" alt="Store" class="store-logo">
                                <span>Poultry Farm</span>
                            </div>
                            <button class="add-to-cart" data-product-id="10">
                                <i class="fas fa-cart-plus"></i> Add
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cart Page Content -->
            <div class="page-content hidden" id="cartPage">
                <div class="cart-container">
                    <h2 class="section-title">Your Cart</h2>
                    
                    <div class="cart-items" id="cartItems">
                        <!-- Cart items will be populated here -->
                    </div>
                    
                    <div class="cart-summary">
                        <div class="summary-row">
                            <span>Subtotal</span>
                            <span id="cartSubtotal">0 ETB</span>
                        </div>
                        <div class="summary-row">
                            <span>Delivery</span>
                            <span id="cartDelivery">25 ETB</span>
                        </div>
                        <div class="summary-row summary-total">
                            <span>Total</span>
                            <span id="cartTotal">25 ETB</span>
                        </div>
                        
                        <button class="checkout-btn" id="proceedToCheckout">
                            Proceed to Checkout
                        </button>
                    </div>
                </div>
            </div>

            <!-- Checkout Page -->
            <div class="page-content hidden" id="checkoutPage">
                <div class="checkout-container">
                    <h2 class="section-title">Checkout</h2>
                    
                    <div class="checkout-section">
                        <h3 class="checkout-section-title">
                            Delivery Address
                            <a href="#" class="checkout-edit" id="editAddress">Change</a>
                        </h3>
                        <div class="address-details" id="selectedAddress">
                            <!-- Address will be populated here -->
                        </div>
                    </div>
                    
                    <div class="checkout-section">
                        <h3 class="checkout-section-title">
                            Payment Method
                            <a href="#" class="checkout-edit" id="editPayment">Change</a>
                        </h3>
                        
                        <div class="payment-method" data-payment="cod">
                            <i class="fas fa-money-bill-wave payment-icon"></i>
                            <div class="payment-text">Cash on Delivery</div>
                            <div class="payment-radio selected"></div>
                        </div>
                        
                        <div class="payment-method" data-payment="card">
                            <i class="fas fa-credit-card payment-icon"></i>
                            <div class="payment-text">Credit/Debit Card</div>
                            <div class="payment-radio"></div>
                        </div>
                        
                        <div class="payment-method" data-payment="mobile">
                            <i class="fas fa-mobile-alt payment-icon"></i>
                            <div class="payment-text">Mobile Payment</div>
                            <div class="payment-radio"></div>
                        </div>
                    </div>
                    
                    <div class="checkout-section">
                        <h3 class="checkout-section-title">Order Summary</h3>
                        
                        <div class="cart-summary">
                            <div class="summary-row">
                                <span>Subtotal</span>
                                <span id="checkoutSubtotal">0 ETB</span>
                            </div>
                            <div class="summary-row">
                                <span>Delivery</span>
                                <span id="checkoutDelivery">25 ETB</span>
                            </div>
                            <div class="summary-row summary-total">
                                <span>Total</span>
                                <span id="checkoutTotal">25 ETB</span>
                            </div>
                            
                            <button class="checkout-btn" id="placeOrder">
                                Place Order
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Order Confirmation Page -->
            <div class="page-content hidden" id="orderConfirmationPage">
                <div class="auth-container">
                    <div class="auth-card">
                        <div class="text-center">
                            <i class="fas fa-check-circle" style="font-size: 3rem; color: var(--success); margin-bottom: 16px;"></i>
                            <h2 class="auth-title">Order Confirmed!</h2>
                            <p style="margin-bottom: 24px;">Your order <span id="orderNumber"></span> has been placed successfully.</p>
                            
                            <div style="text-align: left; margin-bottom: 24px;">
                                <p><strong>Estimated delivery:</strong> <span id="deliveryTime"></span></p>
                                <p><strong>Payment method:</strong> <span id="paymentMethod"></span></p>
                                <p><strong>Total amount:</strong> <span id="orderTotal"></span></p>
                            </div>
                            
                            <button class="checkout-btn" id="trackOrder">
                                Track Order
                            </button>
                            
                            <button class="checkout-btn" style="background-color: var(--background); color: var(--primary); border: 1px solid var(--primary); margin-top: 12px;" id="continueShopping">
                                Continue Shopping
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile Page Content -->
            <div class="page-content hidden" id="profilePage">
                <div class="profile-header">
                    <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1374&q=80" alt="Profile" class="profile-avatar">
                    <div class="profile-info">
                        <h2 id="profileName">Eyoel Mulugeta</h2>
                        <p id="profilePhone">+251 934592679</p>
                    </div>
                </div>
                
                <div class="profile-menu">
                    <a href="#" class="menu-item" id="personalInfoLink">
                        <i class="fas fa-user menu-icon"></i>
                        <span class="menu-text">Personal Information</span>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </a>
                    <a href="#" class="menu-item" id="addressesLink">
                        <i class="fas fa-map-marker-alt menu-icon"></i>
                        <span class="menu-text">Addresses</span>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </a>
                    <a href="#" class="menu-item" id="ordersLink">
                        <i class="fas fa-shopping-bag menu-icon"></i>
                        <span class="menu-text">Orders</span>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </a>
                    <a href="#" class="menu-item" id="wishlistLink">
                        <i class="fas fa-heart menu-icon"></i>
                        <span class="menu-text">Wishlist</span>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </a>
                </div>
                
                <div class="profile-menu">
                    <a href="#" class="menu-item" id="settingsLink">
                        <i class="fas fa-cog menu-icon"></i>
                        <span class="menu-text">Settings</span>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </a>
                    <a href="#" class="menu-item">
                        <i class="fas fa-question-circle menu-icon"></i>
                        <span class="menu-text">Help & Support</span>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </a>
                    <a href="#" class="menu-item" id="logoutLink">
                        <i class="fas fa-sign-out-alt menu-icon"></i>
                        <span class="menu-text">Logout</span>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </a>
                </div>
            </div>

            <!-- Personal Information Page -->
            <div class="page-content hidden" id="personalInfoPage">
                <div class="auth-container">
                    <div class="auth-card">
                        <h2 class="auth-title">Personal Information</h2>
                        <form class="auth-form" id="personalInfoForm">
                            <div class="form-group">
                                <label for="fullName">Full Name</label>
                                <input type="text" id="fullName" value="John Doe">
                            </div>
                            <div class="form-group">
                                <label for="phoneNumber">Phone Number</label>
                                <input type="tel" id="phoneNumber" value="+251 91 123 4567">
                            </div>
                            <div class="form-group">
                                <label for="email">Email (optional)</label>
                                <input type="email" id="email" placeholder="Enter your email">
                            </div>
                            <button type="submit">Save Changes</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Addresses Page -->
            <div class="page-content hidden" id="addressesPage">
                <div class="addresses-container">
                    <h2 class="section-title">Saved Addresses</h2>
                    
                    <div class="address-list" id="addressList">
                        <!-- Addresses will be populated here -->
                    </div>
                    
                    <button class="add-address-btn" id="addNewAddress">
                        <i class="fas fa-plus"></i> Add New Address
                    </button>
                </div>
            </div>

            <!-- Add/Edit Address Page -->
            <div class="page-content hidden" id="editAddressPage">
                <div class="auth-container">
                    <div class="auth-card">
                        <h2 class="auth-title" id="addressFormTitle">Add New Address</h2>
                        <form class="auth-form" id="addressForm">
                            <input type="hidden" id="addressId">
                            <div class="form-group">
                                <label for="addressName">Address Name</label>
                                <input type="text" id="addressName" placeholder="e.g. Home, Work">
                            </div>
                            <div class="form-group">
                                <label for="streetAddress">Street Address</label>
                                <input type="text" id="streetAddress" placeholder="Street name, house number">
                            </div>
                            <div class="form-group">
                                <label for="city">City</label>
                                <input type="text" id="city" placeholder="City">
                            </div>
                            <div class="form-group">
                                <label for="phone">Phone Number</label>
                                <input type="tel" id="phone" placeholder="+251 __ ___ ____">
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="defaultAddress"> Set as default address
                                </label>
                            </div>
                            <button type="submit">Save Address</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Orders Page -->
            <div class="page-content hidden" id="ordersPage">
                <div class="orders-container">
                    <h2 class="section-title">My Orders</h2>
                    
                    <div class="orders-list" id="ordersList">
                        <!-- Orders will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Order Details Page -->
            <div class="page-content hidden" id="orderDetailsPage">
                <div class="cart-container">
                    <h2 class="section-title">Order <span id="orderId"></span></h2>
                    <p class="text-center mb-3" id="orderDateStatus"></p>
                    
                    <div class="delivery-status">
                        <div class="status-header">
                            <h3 class="status-title">Delivery Status</h3>
                            <span class="status-time" id="statusUpdateTime"></span>
                        </div>
                        
                        <div class="status-steps" id="statusSteps">
                            <!-- Status steps will be populated here -->
                        </div>
                    </div>
                    
                    <div class="cart-items" id="orderItems">
                        <!-- Order items will be populated here -->
                    </div>
                    
                    <div class="cart-summary">
                        <div class="summary-row">
                            <span>Subtotal</span>
                            <span id="orderSubtotal">0 ETB</span>
                        </div>
                        <div class="summary-row">
                            <span>Delivery</span>
                            <span id="orderDeliveryFee">25 ETB</span>
                        </div>
                        <div class="summary-row summary-total">
                            <span>Total</span>
                            <span id="orderTotalAmount">25 ETB</span>
                        </div>
                        
                        <div class="checkout-section mt-4">
                            <h3 class="checkout-section-title">Delivery Address</h3>
                            <div class="address-details" id="orderAddress">
                                <!-- Address will be populated here -->
                            </div>
                        </div>
                        
                        <div class="checkout-section mt-4">
                            <h3 class="checkout-section-title">Payment Method</h3>
                            <div class="payment-method">
                                <i class="fas fa-money-bill-wave payment-icon" id="orderPaymentIcon"></i>
                                <div class="payment-text" id="orderPaymentMethod"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Wishlist Page -->
            <div class="page-content hidden" id="wishlistPage">
                <div class="wishlist-container">
                    <h2 class="section-title">Wishlist</h2>
                    
                    <div class="products-grid" id="wishlistItems">
                        <!-- Wishlist items will be populated here -->
                    </div>
                    
                    <div class="wishlist-empty hidden" id="emptyWishlist">
                        <i class="far fa-heart wishlist-empty-icon"></i>
                        <h3 class="section-title">Your wishlist is empty</h3>
                        <p class="wishlist-empty-text">Save your favorite items here for easy access later</p>
                        <button class="add-to-cart-large" id="startShopping">
                            <i class="fas fa-shopping-bag"></i> Start Shopping
                        </button>
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div class="page-content hidden" id="settingsPage">
                <div class="settings-container">
                    <h2 class="section-title">Settings</h2>
                    
                    <div class="settings-group">
                        <div class="settings-group-title">Preferences</div>
                        <a href="#" class="settings-item" id="notificationSettings">
                            <i class="fas fa-bell settings-icon"></i>
                            <span class="settings-text">Notifications</span>
                            <span class="settings-value" id="notificationStatus">On</span>
                            <i class="fas fa-chevron-right menu-arrow"></i>
                        </a>
                        <a href="#" class="settings-item" id="darkModeToggle">
                            <i class="fas fa-moon settings-icon"></i>
                            <span class="settings-text">Dark Mode</span>
                            <span class="settings-value" id="darkModeStatus">Off</span>
                            <i class="fas fa-chevron-right menu-arrow"></i>
                        </a>
                        <a href="#" class="settings-item">
                            <i class="fas fa-language settings-icon"></i>
                            <span class="settings-text">Language</span>
                            <span class="settings-value">English</span>
                            <i class="fas fa-chevron-right menu-arrow"></i>
                        </a>
                    </div>
                    
                    <div class="settings-group">
                        <div class="settings-group-title">Security</div>
                        <a href="#" class="settings-item" id="changePasswordLink">
                            <i class="fas fa-lock settings-icon"></i>
                            <span class="settings-text">Change Password</span>
                            <i class="fas fa-chevron-right menu-arrow"></i>
                        </a>
                    </div>
                    
                    <div class="settings-group">
                        <div class="settings-group-title">About</div>
                        <a href="#" class="settings-item">
                            <i class="fas fa-info-circle settings-icon"></i>
                            <span class="settings-text">About Asbeza365</span>
                            <i class="fas fa-chevron-right menu-arrow"></i>
                        </a>
                        <a href="#" class="settings-item">
                            <i class="fas fa-file-alt settings-icon"></i>
                            <span class="settings-text">Terms & Conditions</span>
                            <i class="fas fa-chevron-right menu-arrow"></i>
                        </a>
                        <a href="#" class="settings-item">
                            <i class="fas fa-shield-alt settings-icon"></i>
                            <span class="settings-text">Privacy Policy</span>
                            <i class="fas fa-chevron-right menu-arrow"></i>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Change Password Page -->
            <div class="page-content hidden" id="changePasswordPage">
                <div class="auth-container">
                    <div class="auth-card">
                        <h2 class="auth-title">Change Password</h2>
                        <form class="auth-form" id="changePasswordForm">
                            <div class="form-group">
                                <label for="currentPassword">Current Password</label>
                                <input type="password" id="currentPassword" placeholder="Enter current password">
                            </div>
                            <div class="form-group">
                                <label for="newPassword">New Password</label>
                                <input type="password" id="newPassword" placeholder="Enter new password">
                            </div>
                            <div class="form-group">
                                <label for="confirmPassword">Confirm New Password</label>
                                <input type="password" id="confirmPassword" placeholder="Confirm new password">
                            </div>
                            <button type="submit">Change Password</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Product Detail Page -->
            <div class="page-content hidden" id="productDetailPage">
                <div class="product-detail-container">
                    <img src="" alt="Product" class="product-detail-image" id="productDetailImage">
                    
                    <div class="product-detail-content">
                        <h1 class="product-detail-name" id="productDetailName"></h1>
                        <div class="product-detail-price" id="productDetailPrice">
                            <!-- Price will be populated here -->
                        </div>
                        
                        <div class="product-detail-store">
                            <img src="https://via.placeholder.com/40" alt="Store" class="store-logo-large" id="productDetailStoreLogo">
                            <div class="store-info">
                                <h4 id="productDetailStoreName"></h4>
                                <p id="productDetailStoreLocation"></p>
                            </div>
                        </div>
                        
                        <div class="product-detail-actions">
                            <button class="add-to-cart-large" id="addToCartDetail">
                                <i class="fas fa-cart-plus"></i> Add to Cart
                            </button>
                            <button class="wishlist-btn" id="wishlistBtn">
                                <i class="far fa-heart"></i>
                            </button>
                        </div>
                        
                        <div class="tab-container">
                            <div class="tab active" data-tab="description">Description</div>
                            <div class="tab" data-tab="comparison">Price Comparison</div>
                            <div class="tab" data-tab="reviews">Reviews</div>
                        </div>
                        
                        <div class="product-detail-description" id="productDescription">
                            <!-- Description will be populated here -->
                        </div>
                        
                        <div class="price-comparison-container hidden" id="priceComparisonTab">
                            <h3 class="section-title mt-4">Price Comparison</h3>
                            <table class="price-comparison-table" id="priceComparisonTable">
                                <!-- Price comparison will be populated here -->
                            </table>
                        </div>
                        
                        <div class="reviews-container hidden" id="reviewsTab">
                            <h3 class="section-title mt-4">Customer Reviews</h3>
                            <div id="reviewsList">
                                <!-- Reviews will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Delivery Tracking Page -->
            <div class="page-content hidden" id="deliveryPage">
                <div class="delivery-container">
                    <h2 class="section-title">Order <span id="trackingOrderNumber"></span></h2>
                    <p class="text-center mb-3">Estimated delivery: <span id="trackingDeliveryTime"></span></p>
                    
                    <div class="delivery-status">
                        <div class="status-header">
                            <h3 class="status-title">Delivery Status</h3>
                            <span class="status-time" id="trackingUpdateTime"></span>
                        </div>
                        
                        <div class="status-steps" id="trackingSteps">
                            <!-- Tracking steps will be populated here -->
                        </div>
                    </div>
                    
                    <div class="delivery-map"></div>
                    
                    <div class="delivery-driver">
                        <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1374&q=80" alt="Driver" class="driver-avatar">
                        <div class="driver-info">
                            <h4 id="driverName">Daniel Mekonnen</h4>
                            <p>Your delivery partner</p>
                        </div>
                        <div class="driver-actions">
                            <button class="driver-btn" id="callDriver">
                                <i class="fas fa-phone"></i>
                            </button>
                            <button class="driver-btn" id="messageDriver">
                                <i class="fas fa-comment"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Login Page -->
            <div class="page-content hidden" id="loginPage">
                <div class="auth-container">
                    <div class="auth-card">
                        <h2 class="auth-title">Login</h2>
                        <form class="auth-form" id="loginForm">
                            <div class="form-group">
                                <label for="loginPhone">Phone Number</label>
                                <input type="tel" id="loginPhone" placeholder="+251 __ ___ ____">
                            </div>
                            <div class="form-group">
                                <label for="loginPassword">Password</label>
                                <input type="password" id="loginPassword" placeholder="Enter your password">
                            </div>
                            <button type="submit">Login</button>
                            <div class="auth-switch">
                                Don't have an account? <a href="#" id="showSignup">Sign up</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Signup Page -->
            <div class="page-content hidden" id="signupPage">
                <div class="auth-container">
                    <div class="auth-card">
                        <h2 class="auth-title">Create Account</h2>
                        <form class="auth-form" id="signupForm">
                            <div class="form-group">
                                <label for="signupName">Full Name</label>
                                <input type="text" id="signupName" placeholder="Enter your full name">
                            </div>
                            <div class="form-group">
                                <label for="signupPhone">Phone Number</label>
                                <input type="tel" id="signupPhone" placeholder="+251 __ ___ ____">
                            </div>
                            <div class="form-group">
                                <label for="signupPassword">Password</label>
                                <input type="password" id="signupPassword" placeholder="Create a password">
                            </div>
                            <div class="form-group">
                                <label for="confirmPassword">Confirm Password</label>
                                <input type="password" id="confirmPassword" placeholder="Confirm your password">
                            </div>
                            <button type="submit">Sign Up</button>
                            <div class="auth-switch">
                                Already have an account? <a href="#" id="showLogin">Login</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <a href="#" class="nav-item active" data-page="homePage">
                <i class="fas fa-home nav-icon"></i>
                <span>Home</span>
            </a>
            <a href="#" class="nav-item" data-page="searchPage">
                <i class="fas fa-search nav-icon"></i>
                <span>Search</span>
            </a>
            <a href="#" class="nav-item" data-page="cartPage">
                <i class="fas fa-shopping-cart nav-icon"></i>
                <span>Cart <span class="cart-badge hidden" id="cartBadge">0</span></span>
            </a>
            <a href="#" class="nav-item" data-page="profilePage">
                <i class="fas fa-user nav-icon"></i>
                <span>Profile</span>
            </a>
        </nav>
    </div>

    <script>
        // App State Management
        const state = {
            user: null,
            cart: [],
            wishlist: [],
            addresses: [
                {
                    id: '1',
                    name: 'Home',
                    street: 'Bole, Road 12, House #123',
                    city: 'Addis Ababa, Ethiopia',
                    phone: '+251 91 123 4567',
                    isDefault: true
                },
                {
                    id: '2',
                    name: 'Work',
                    street: 'Mexico Square, Dembel City Center',
                    city: 'Floor 5, Office 502\nAddis Ababa, Ethiopia',
                    phone: '+251 91 987 6543',
                    isDefault: false
                }
            ],
            orders: [
                {
                    id: '12345',
                    date: 'Today, 2:15 PM',
                    status: 'delivered',
                    items: [
                        { id: '1', name: 'Fresh Mangoes (1kg)', price: 105, quantity: 1, store: 'Fresh Corner', image: 'https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80' },
                        { id: '4', name: 'Mama Pasta (500g)', price: 38, quantity: 2, store: 'Family Supermarket', image: 'https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80' }
                    ],
                    subtotal: 181,
                    delivery: 25,
                    total: 206,
                    payment: 'cod',
                    address: '1',
                    statusSteps: [
                        { label: 'Order Confirmed', description: '2:00 PM', status: 'completed' },
                        { label: 'Preparing Order', description: '2:05 PM', status: 'completed' },
                        { label: 'On the Way', description: '2:15 PM', status: 'completed' },
                        { label: 'Delivered', description: '3:45 PM', status: 'completed' }
                    ]
                },
                {
                    id: '12344',
                    date: 'Yesterday, 10:30 AM',
                    status: 'processing',
                    items: [
                        { id: '3', name: 'Abyssinia Oil (1L)', price: 89, quantity: 1, store: 'Selam Supermarket', image: 'https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80' }
                    ],
                    subtotal: 89,
                    delivery: 25,
                    total: 114,
                    payment: 'mobile',
                    address: '2',
                    statusSteps: [
                        { label: 'Order Confirmed', description: '10:30 AM', status: 'completed' },
                        { label: 'Preparing Order', description: '10:35 AM', status: 'completed' },
                        { label: 'On the Way', description: '11:15 AM', status: 'active' },
                        { label: 'Delivered', description: '', status: '' }
                    ]
                },
                {
                    id: '12340',
                    date: 'July 10, 2023',
                    status: 'cancelled',
                    items: [
                        { id: '5', name: 'Ambo Mineral Water (1L)', price: 25, quantity: 4, store: 'Kaldis Supermarket', image: 'https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80' },
                        { id: '6', name: 'Fresh Milk (1L)', price: 42, quantity: 2, store: 'Shola Market', image: 'https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80' },
                        { id: '9', name: 'Tomatoes (1kg)', price: 35, quantity: 1, store: 'Local Market', image: 'https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80' }
                    ],
                    subtotal: 264,
                    delivery: 25,
                    total: 289,
                    payment: 'card',
                    address: '1',
                    statusSteps: [
                        { label: 'Order Confirmed', description: '10:30 AM', status: 'completed' },
                        { label: 'Preparing Order', description: '10:35 AM', status: 'completed' },
                        { label: 'Cancelled', description: '11:15 AM', status: 'completed' }
                    ]
                }
            ],
            products: [
                {
                    id: '1',
                    name: 'Fresh Mangoes (1kg)',
                    price: 105,
                    originalPrice: 145,
                    discount: 28,
                    store: 'Fresh Corner',
                    storeLocation: 'Bole, Addis Ababa',
                    image: 'https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80',
                    description: 'Fresh, ripe mangoes imported directly from farmers. Sweet and juicy with perfect texture. Each mango is carefully selected for quality.\n\nStorage: Keep at room temperature until ripe, then refrigerate.\n\nOrigin: Arba Minch, Ethiopia',
                    category: 'fruits',
                    priceComparison: [
                        { store: 'Fresh Corner', price: 105, distance: '1.2 km' },
                        { store: 'Kaldis Supermarket', price: 125, distance: '2.5 km' },
                        { store: 'Shola Market', price: 120, distance: '3.1 km' },
                        { store: 'Family Supermarket', price: 145, distance: '4.0 km' }
                    ]
                },
                {
                    id: '2',
                    name: 'Bananas (Bunch)',
                    price: 72,
                    originalPrice: 85,
                    discount: 15,
                    store: 'Green Market',
                    storeLocation: 'Bole, Addis Ababa',
                    image: 'https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80',
                    description: 'Fresh, ripe bananas from local farms. Perfect for smoothies, baking, or as a healthy snack.\n\nStorage: Keep at room temperature away from direct sunlight.',
                    category: 'fruits',
                    priceComparison: [
                        { store: 'Green Market', price: 72, distance: '1.5 km' },
                        { store: 'Fresh Corner', price: 80, distance: '2.0 km' },
                        { store: 'Kaldis Supermarket', price: 85, distance: '2.5 km' }
                    ]
                },
                {
                    id: '3',
                    name: 'Abyssinia Oil (1L)',
                    price: 89,
                    store: 'Selam Supermarket',
                    storeLocation: 'Bole, Addis Ababa',
                    image: 'https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80',
                    description: 'Premium quality cooking oil made from locally sourced ingredients. Ideal for all your cooking needs.\n\nIngredients: 100% vegetable oil\n\nShelf life: 12 months',
                    category: 'dairy',
                    priceComparison: [
                        { store: 'Selam Supermarket', price: 89, distance: '1.8 km' },
                        { store: 'Family Supermarket', price: 95, distance: '2.2 km' },
                        { store: 'Kaldis Supermarket', price: 92, distance: '2.5 km' }
                    ]
                },
                {
                    id: '4',
                    name: 'Mama Pasta (500g)',
                    price: 38,
                    originalPrice: 45,
                    discount: 16,
                    store: 'Family Supermarket',
                    storeLocation: 'Bole, Addis Ababa',
                    image: 'https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80',
                    description: 'High quality pasta made from durum wheat. Perfect for all your Italian dishes.\n\nCooking time: 8-10 minutes\n\nIngredients: Durum wheat semolina, water',
                    category: 'dairy',
                    priceComparison: [
                        { store: 'Family Supermarket', price: 38, distance: '1.2 km' },
                        { store: 'Selam Supermarket', price: 42, distance: '1.5 km' },
                        { store: 'Kaldis Supermarket', price: 45, distance: '2.0 km' }
                    ]
                },
                {
                    id: '5',
                    name: 'Ambo Mineral Water (1L)',
                    price: 25,
                    store: 'Kaldis Supermarket',
                    storeLocation: 'Bole, Addis Ababa',
                    image: 'https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80',
                    description: 'Natural mineral water from the springs of Ambo. Rich in essential minerals for your health.\n\nSource: Ambo, Ethiopia\n\npH: 7.5',
                    category: 'beverages',
                    priceComparison: [
                        { store: 'Kaldis Supermarket', price: 25, distance: '1.0 km' },
                        { store: 'Family Supermarket', price: 28, distance: '1.2 km' },
                        { store: 'Selam Supermarket', price: 30, distance: '1.5 km' }
                    ]
                },
                {
                    id: '6',
                    name: 'Fresh Milk (1L)',
                    price: 42,
                    store: 'Shola Market',
                    storeLocation: 'Bole, Addis Ababa',
                    image: 'https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80',
                    description: 'Fresh, pasteurized milk from local dairy farms. Rich in calcium and vitamins.\n\nStorage: Keep refrigerated\n\nExpiry: 7 days from production',
                    category: 'dairy',
                    priceComparison: [
                        { store: 'Shola Market', price: 42, distance: '0.8 km' },
                        { store: 'Kaldis Supermarket', price: 45, distance: '1.2 km' },
                        { store: 'Family Supermarket', price: 48, distance: '1.5 km' }
                    ]
                },
                {
                    id: '7',
                    name: 'Avocados (4pcs)',
                    price: 84,
                    originalPrice: 120,
                    discount: 30,
                    store: 'Organic Farm',
                    storeLocation: 'Bole, Addis Ababa',
                    image: 'https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80',
                    description: 'Organic avocados grown without pesticides. Perfect for guacamole, salads or toast.\n\nRipeness: Ready to eat\n\nOrigin: Southern Ethiopia',
                    category: 'fruits',
                    priceComparison: [
                        { store: 'Organic Farm', price: 84, distance: '1.5 km' },
                        { store: 'Fresh Corner', price: 95, distance: '2.0 km' },
                        { store: 'Green Market', price: 110, distance: '2.2 km' }
                    ]
                },
                {
                    id: '8',
                    name: 'Chicken Breast (1kg)',
                    price: 168,
                    originalPrice: 210,
                    discount: 20,
                    store: 'Meat Master',
                    storeLocation: 'Bole, Addis Ababa',
                    image: 'https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80',
                    description: 'Fresh, skinless chicken breast from free-range chickens. High in protein and low in fat.\n\nStorage: Keep refrigerated or frozen\n\nExpiry: 3 days from purchase',
                    category: 'meat',
                    priceComparison: [
                        { store: 'Meat Master', price: 168, distance: '1.8 km' },
                        { store: 'Kaldis Supermarket', price: 185, distance: '2.0 km' },
                        { store: 'Family Supermarket', price: 195, distance: '2.2 km' }
                    ]
                },
                {
                    id: '9',
                    name: 'Tomatoes (1kg)',
                    price: 35,
                    store: 'Local Market',
                    storeLocation: 'Bole, Addis Ababa',
                    image: 'https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80',
                    description: 'Fresh, locally grown tomatoes. Perfect for salads, sauces and cooking.\n\nStorage: Keep at room temperature\n\nOrigin: Ziway, Ethiopia',
                    category: 'vegetables',
                    priceComparison: [
                        { store: 'Local Market', price: 35, distance: '0.5 km' },
                        { store: 'Fresh Corner', price: 40, distance: '1.0 km' },
                        { store: 'Green Market', price: 45, distance: '1.2 km' }
                    ]
                },
                {
                    id: '10',
                    name: 'Eggs (30pcs)',
                    price: 108,
                    originalPrice: 120,
                    discount: 10,
                    store: 'Poultry Farm',
                    storeLocation: 'Bole, Addis Ababa',
                    image: 'https://images.unsplash.com/photo-1601493700631-2b16ec4b4716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80',
                    description: 'Farm fresh eggs from free-range chickens. Rich in protein and nutrients.\n\nStorage: Keep refrigerated\n\nExpiry: 3 weeks from purchase',
                    category: 'dairy',
                    priceComparison: [
                        { store: 'Poultry Farm', price: 108, distance: '1.2 km' },
                        { store: 'Kaldis Supermarket', price: 115, distance: '1.5 km' },
                        { store: 'Family Supermarket', price: 120, distance: '1.8 km' }
                    ]
                }
            ],
            currentProduct: null,
            currentOrder: null,
            paymentMethod: 'cod',
            darkMode: false,
            notifications: true,
            recentSearches: ['Mango', 'Oil', 'Pasta', 'Milk']
        };

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in (for demo purposes)
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            if (isLoggedIn) {
                state.user = {
                    name: localStorage.getItem('userName') || 'Eyoel Mulugeta',
                    phone: localStorage.getItem('userPhone') || '+251 934592679',
                    email: localStorage.getItem('userEmail') || ''
                };
                updateProfileInfo();
            }

            // Check for dark mode preference
            const darkModePref = localStorage.getItem('darkMode') === 'true';
            if (darkModePref) {
                toggleDarkMode(true);
            }

            // Load cart from localStorage
            const savedCart = localStorage.getItem('cart');
            if (savedCart) {
                state.cart = JSON.parse(savedCart);
                updateCartBadge();
            }

            // Load wishlist from localStorage
            const savedWishlist = localStorage.getItem('wishlist');
            if (savedWishlist) {
                state.wishlist = JSON.parse(savedWishlist);
            }

            // Start deal countdown timer
            startDealCountdown();

            // Initialize all functionality
            initNavigation();
            initCartFunctionality();
            initWishlistFunctionality();
            initAddressFunctionality();
            initOrderFunctionality();
            initProductDetailFunctionality();
            initCheckoutFunctionality();
            initAuthFunctionality();
            initSettingsFunctionality();
            initSearchFunctionality();
            initCategoryFunctionality();

            // Show home page by default
            navigateTo('homePage');
        });

        // Initialize navigation system
        function initNavigation() {
            // Get all page elements and nav items
            const pages = document.querySelectorAll('.page-content');
            const navItems = document.querySelectorAll('.nav-item');
            
            // Navigation function
            function navigateTo(pageId) {
                // Hide all pages
                pages.forEach(page => {
                    page.classList.add('hidden');
                });
                
                // Show selected page
                const page = document.getElementById(pageId);
                if (page) {
                    page.classList.remove('hidden');
                    
                    // Load dynamic content based on page
                    switch(pageId) {
                        case 'cartPage':
                            renderCart();
                            break;
                        case 'wishlistPage':
                            renderWishlist();
                            break;
                        case 'addressesPage':
                            renderAddresses();
                            break;
                        case 'ordersPage':
                            renderOrders();
                            break;
                        case 'profilePage':
                            updateProfileInfo();
                            break;
                    }
                }
                
                // Update active nav item
                navItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.getAttribute('data-page') === pageId) {
                        item.classList.add('active');
                    }
                });
                
                // Scroll to top
                document.querySelector('.main-content').scrollTo(0, 0);
            }
            
            // Add click event to nav items
            navItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const pageId = this.getAttribute('data-page');
                    
                    // Check if user needs to be logged in for this page
                    if (['profilePage', 'cartPage', 'wishlistPage', 'ordersPage', 'addressesPage'].includes(pageId) {
                        if (!state.user) {
                            navigateTo('loginPage');
                            return;
                        }
                    }
                    
                    navigateTo(pageId);
                });
            });
            
            // Header icons navigation
            document.getElementById('headerSearch')?.addEventListener('click', function(e) {
                e.preventDefault();
                navigateTo('searchPage');
            });
            
            document.getElementById('headerCart')?.addEventListener('click', function(e) {
                e.preventDefault();
                if (!state.user) {
                    navigateTo('loginPage');
                    return;
                }
                navigateTo('cartPage');
            });
            
            // Login/Signup toggle
            document.getElementById('showSignup')?.addEventListener('click', function(e) {
                e.preventDefault();
                navigateTo('signupPage');
            });
            
            document.getElementById('showLogin')?.addEventListener('click', function(e) {
                e.preventDefault();
                navigateTo('loginPage');
            });
            
            // Profile menu navigation
            document.getElementById('personalInfoLink')?.addEventListener('click', function(e) {
                e.preventDefault();
                navigateTo('personalInfoPage');
            });
            
            document.getElementById('addressesLink')?.addEventListener('click', function(e) {
                e.preventDefault();
                navigateTo('addressesPage');
            });
            
            document.getElementById('ordersLink')?.addEventListener('click', function(e) {
                e.preventDefault();
                navigateTo('ordersPage');
            });
            
            document.getElementById('wishlistLink')?.addEventListener('click', function(e) {
                e.preventDefault();
                navigateTo('wishlistPage');
            });
            
            document.getElementById('settingsLink')?.addEventListener('click', function(e) {
                e.preventDefault();
                navigateTo('settingsPage');
            });
            
            document.getElementById('logoutLink')?.addEventListener('click', function(e) {
                e.preventDefault();
                logoutUser();
            });
            
            document.getElementById('changePasswordLink')?.addEventListener('click', function(e) {
                e.preventDefault();
                navigateTo('changePasswordPage');
            });
            
            // Add new address
            document.getElementById('addNewAddress')?.addEventListener('click', function(e) {
                e.preventDefault();
                document.getElementById('addressFormTitle').textContent = 'Add New Address';
                document.getElementById('addressForm').reset();
                document.getElementById('addressId').value = '';
                navigateTo('editAddressPage');
            });
            
            // View all links
            document.getElementById('viewAllDeals')?.addEventListener('click', function(e) {
                e.preventDefault();
                navigateTo('dealsPage');
            });
            
            document.getElementById('viewAllProducts')?.addEventListener('click', function(e) {
                e.preventDefault();
                navigateTo('productsPage');
            });
            
            // Category navigation
            document.querySelectorAll('.category-card').forEach(card => {
                card.addEventListener('click', function(e) {
                    e.preventDefault();
                    const category = this.getAttribute('data-category');
                    const categoryName = this.querySelector('.category-name').textContent;
                    document.getElementById('categoryTitle').textContent = categoryName;
                    
                    // Filter products by category
                    const categoryProducts = state.products.filter(p => p.category === category);
                    const container = document.getElementById('categoryProducts');
                    container.innerHTML = '';
                    
                    if (categoryProducts.length === 0) {
                        container.innerHTML = '<p>No products found in this category.</p>';
                    } else {
                        categoryProducts.forEach(product => {
                            container.appendChild(createProductCard(product));
                        });
                    }
                    
                    navigateTo('categoryPage');
                });
            });
            
            // Product card click
            document.addEventListener('click', function(e) {
                const productCard = e.target.closest('.product-card');
                if (productCard) {
                    const productId = productCard.getAttribute('data-product');
                    const product = state.products.find(p => p.id === productId);
                    if (product) {
                        showProductDetail(product);
                    }
                }
            });
            
            // Order details
            document.addEventListener('click', function(e) {
                const orderAction = e.target.closest('.order-action');
                if (orderAction) {
                    e.preventDefault();
                    const orderId = orderAction.getAttribute('data-order');
                    const order = state.orders.find(o => o.id === orderId);
                    if (order) {
                        showOrderDetails(order);
                    }
                }
            });
            
            // Start shopping from empty wishlist
            document.getElementById('startShopping')?.addEventListener('click', function(e) {
                e.preventDefault();
                navigateTo('homePage');
            });
            
            // Continue shopping from order confirmation
            document.getElementById('continueShopping')?.addEventListener('click', function(e) {
                e.preventDefault();
                navigateTo('homePage');
            });
            
            // Tab navigation in product detail
            document.addEventListener('click', function(e) {
                const tab = e.target.closest('.tab');
                if (tab) {
                    e.preventDefault();
                    const tabName = tab.getAttribute('data-tab');
                    showProductTab(tabName);
                }
            });
        }

        // Initialize cart functionality
        function initCartFunctionality() {
            // Add to cart buttons
            document.addEventListener('click', function(e) {
                const addToCartBtn = e.target.closest('.add-to-cart');
                if (addToCartBtn) {
                    e.preventDefault();
                    const productId = addToCartBtn.getAttribute('data-product-id');
                    addToCart(productId);
                }
            });
            
            // Add to cart from detail page
            document.getElementById('addToCartDetail')?.addEventListener('click', function(e) {
                e.preventDefault();
                if (state.currentProduct) {
                    addToCart(state.currentProduct.id);
                    showToast('Added to cart');
                }
            });
            
            // Quantity controls in cart
            document.addEventListener('click', function(e) {
                const quantityBtn = e.target.closest('.quantity-btn');
                if (quantityBtn) {
                    e.preventDefault();
                    const cartItem = quantityBtn.closest('.cart-item');
                    const productId = cartItem.getAttribute('data-product-id');
                    const isIncrease = quantityBtn.textContent === '+';
                    updateCartItemQuantity(productId, isIncrease);
                }
            });
            
            // Remove item from cart
            document.addEventListener('click', function(e) {
                const removeBtn = e.target.closest('.remove-item');
                if (removeBtn) {
                    e.preventDefault();
                    const cartItem = removeBtn.closest('.cart-item');
                    const productId = cartItem.getAttribute('data-product-id');
                    removeFromCart(productId);
                }
            });
        }

        // Initialize wishlist functionality
        function initWishlistFunctionality() {
            // Wishlist button in product detail
            document.getElementById('wishlistBtn')?.addEventListener('click', function(e) {
                e.preventDefault();
                if (state.currentProduct) {
                    toggleWishlist(state.currentProduct.id);
                }
            });
            
            // Add to wishlist from product cards
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('fa-heart') || e.target.classList.contains('wishlist-btn')) {
                    e.preventDefault();
                    const productCard = e.target.closest('.product-card');
                    if (productCard) {
                        const productId = productCard.getAttribute('data-product');
                        toggleWishlist(productId);
                    }
                }
            });
        }

        // Initialize address functionality
        function initAddressFunctionality() {
            // Edit address
            document.addEventListener('click', function(e) {
                const editAddress = e.target.closest('.address-action');
                if (editAddress && editAddress.textContent === 'Edit') {
                    e.preventDefault();
                    const addressCard = editAddress.closest('.address-card');
                    const addressId = addressCard.getAttribute('data-address-id');
                    const address = state.addresses.find(a => a.id === addressId);
                    
                    if (address) {
                        document.getElementById('addressFormTitle').textContent = 'Edit Address';
                        document.getElementById('addressId').value = address.id;
                        document.getElementById('addressName').value = address.name;
                        document.getElementById('streetAddress').value = address.street;
                        document.getElementById('city').value = address.city.split('\n')[0];
                        document.getElementById('phone').value = address.phone;
                        document.getElementById('defaultAddress').checked = address.isDefault;
                        
                        navigateTo('editAddressPage');
                    }
                }
            });
            
            // Remove address
            document.addEventListener('click', function(e) {
                const removeAddress = e.target.closest('.address-action');
                if (removeAddress && removeAddress.textContent === 'Remove') {
                    e.preventDefault();
                    const addressCard = removeAddress.closest('.address-card');
                    const addressId = addressCard.getAttribute('data-address-id');
                    
                    if (confirm('Are you sure you want to remove this address?')) {
                        removeAddressFromList(addressId);
                    }
                }
            });
            
            // Save address form
            document.getElementById('addressForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                saveAddress();
            });
            
            // Edit address in checkout
            document.getElementById('editAddress')?.addEventListener('click', function(e) {
                e.preventDefault();
                navigateTo('addressesPage');
            });
        }

        // Initialize order functionality
        function initOrderFunctionality() {
            // Track order from confirmation
            document.getElementById('trackOrder')?.addEventListener('click', function(e) {
                e.preventDefault();
                if (state.currentOrder) {
                    showDeliveryTracking(state.currentOrder);
                }
            });
        }

        // Initialize product detail functionality
        function initProductDetailFunctionality() {
            // This is handled by the showProductDetail function
        }

        // Initialize checkout functionality
        function initCheckoutFunctionality() {
            // Proceed to checkout
            document.getElementById('proceedToCheckout')?.addEventListener('click', function(e) {
                e.preventDefault();
                if (state.cart.length === 0) {
                    showToast('Your cart is empty');
                    return;
                }
                
                navigateTo('checkoutPage');
                renderCheckout();
            });
            
            // Select payment method
            document.addEventListener('click', function(e) {
                const paymentMethod = e.target.closest('.payment-method');
                if (paymentMethod) {
                    const method = paymentMethod.getAttribute('data-payment');
                    selectPaymentMethod(method);
                }
            });
            
            // Place order
            document.getElementById('placeOrder')?.addEventListener('click', function(e) {
                e.preventDefault();
                placeOrder();
            });
            
            // Edit payment method
            document.getElementById('editPayment')?.addEventListener('click', function(e) {
                e.preventDefault();
                // In a real app, this might show a more detailed payment selection
                // For this demo, we'll just scroll to the payment section
                document.querySelector('.checkout-section:nth-child(2)').scrollIntoView();
            });
        }

        // Initialize authentication functionality
        function initAuthFunctionality() {
            // Login form
            document.getElementById('loginForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                loginUser();
            });
            
            // Signup form
            document.getElementById('signupForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                signupUser();
            });
            
            // Save personal info
            document.getElementById('personalInfoForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                savePersonalInfo();
            });
            
            // Change password
            document.getElementById('changePasswordForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                changePassword();
            });
        }

        // Initialize settings functionality
        function initSettingsFunctionality() {
            // Toggle dark mode
            document.getElementById('darkModeToggle')?.addEventListener('click', function(e) {
                e.preventDefault();
                toggleDarkMode(!state.darkMode);
            });
            
            // Toggle notifications
            document.getElementById('notificationSettings')?.addEventListener('click', function(e) {
                e.preventDefault();
                toggleNotifications(!state.notifications);
            });
        }

        // Initialize search functionality
        function initSearchFunctionality() {
            // Home search
            document.getElementById('homeSearch')?.addEventListener('input', function(e) {
                const query = this.value.toLowerCase();
                if (query.length > 2) {
                    navigateTo('searchPage');
                    performSearch(query);
                }
            });
            
            // Search page search
            document.getElementById('searchInput')?.addEventListener('input', function(e) {
                const query = this.value.toLowerCase();
                performSearch(query);
            });
            
            // Recent search tags
            document.addEventListener('click', function(e) {
                const searchTag = e.target.closest('.search-tag');
                if (searchTag) {
                    const query = searchTag.textContent.toLowerCase();
                    document.getElementById('searchInput').value = query;
                    performSearch(query);
                }
            });
        }

        // Initialize category functionality
        function initCategoryFunctionality() {
            // This is handled by the category navigation in initNavigation
        }

        // Helper function to create product card HTML
        function createProductCard(product) {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.setAttribute('data-product', product.id);
            
            const isInWishlist = state.wishlist.includes(product.id);
            const wishlistIcon = isInWishlist ? 'fas fa-heart' : 'far fa-heart';
            
            let priceHTML = '';
            if (product.originalPrice) {
                priceHTML = `
                    <span class="product-original-price">${product.originalPrice} ETB</span>
                    ${product.price} ETB
                `;
            } else {
                priceHTML = `${product.price} ETB`;
            }
            
            let badgeHTML = '';
            if (product.discount) {
                badgeHTML = `<span class="product-badge">-${product.discount}%</span>`;
            }
            
            card.innerHTML = `
                <div class="product-image-container">
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    ${badgeHTML}
                </div>
                <div class="product-content">
                    <h3 class="product-name">${product.name}</h3>
                    <div class="product-price">${priceHTML}</div>
                    <div class="product-store">
                        <img src="https://via.placeholder.com/40" alt="Store" class="store-logo">
                        <span>${product.store}</span>
                    </div>
                    <button class="add-to-cart" data-product-id="${product.id}">
                        <i class="fas fa-cart-plus"></i> Add
                    </button>
                    <button class="wishlist-btn" style="position: absolute; top: 8px; right: 8px; background: rgba(255,255,255,0.8);">
                        <i class="${wishlistIcon}" style="color: ${isInWishlist ? 'var(--error)' : 'var(--text-secondary)'}"></i>
                    </button>
                </div>
            `;
            
            return card;
        }

        // Add product to cart
        function addToCart(productId) {
            if (!state.user) {
                navigateTo('loginPage');
                return;
            }
            
            const product = state.products.find(p => p.id === productId);
            if (!product) return;
            
            const existingItem = state.cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                state.cart.push({
                    id: productId,
                    name: product.name,
                    price: product.price,
                    quantity: 1,
                    store: product.store,
                    image: product.image
                });
            }
            
            saveCart();
            updateCartBadge();
            showToast('Added to cart');
        }

        // Update cart item quantity
        function updateCartItemQuantity(productId, isIncrease) {
            const item = state.cart.find(item => item.id === productId);
            if (!item) return;
            
            if (isIncrease) {
                item.quantity += 1;
            } else {
                if (item.quantity > 1) {
                    item.quantity -= 1;
                } else {
                    removeFromCart(productId);
                    return;
                }
            }
            
            saveCart();
            renderCart();
        }

        // Remove product from cart
        function removeFromCart(productId) {
            state.cart = state.cart.filter(item => item.id !== productId);
            saveCart();
            renderCart();
        }

        // Save cart to localStorage
        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(state.cart));
        }

        // Render cart items
        function renderCart() {
            const container = document.getElementById('cartItems');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (state.cart.length === 0) {
                container.innerHTML = '<p>Your cart is empty</p>';
                document.getElementById('proceedToCheckout').disabled = true;
            } else {
                state.cart.forEach(item => {
                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item';
                    cartItem.setAttribute('data-product-id', item.id);
                    
                    cartItem.innerHTML = `
                        <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                        <div class="cart-item-details">
                            <h3 class="cart-item-name">${item.name}</h3>
                            <p class="cart-item-store">${item.store}</p>
                            <p class="cart-item-price">${item.price} ETB</p>
                            <div class="cart-item-actions">
                                <div class="quantity-control">
                                    <button class="quantity-btn">-</button>
                                    <span class="quantity-value">${item.quantity}</span>
                                    <button class="quantity-btn">+</button>
                                </div>
                                <button class="remove-item">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `;
                    
                    container.appendChild(cartItem);
                });
                
                document.getElementById('proceedToCheckout').disabled = false;
            }
            
            // Update cart summary
            const subtotal = state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const delivery = 25; // Fixed delivery fee for demo
            const total = subtotal + delivery;
            
            document.getElementById('cartSubtotal').textContent = `${subtotal} ETB`;
            document.getElementById('cartDelivery').textContent = `${delivery} ETB`;
            document.getElementById('cartTotal').textContent = `${total} ETB`;
        }

        // Update cart badge
        function updateCartBadge() {
            const badge = document.getElementById('cartBadge');
            if (!badge) return;
            
            const itemCount = state.cart.reduce((count, item) => count + item.quantity, 0);
            
            if (itemCount > 0) {
                badge.textContent = itemCount;
                badge.classList.remove('hidden');
            } else {
                badge.classList.add('hidden');
            }
        }

        // Toggle product in wishlist
        function toggleWishlist(productId) {
            if (!state.user) {
                navigateTo('loginPage');
                return;
            }
            
            const index = state.wishlist.indexOf(productId);
            if (index === -1) {
                state.wishlist.push(productId);
                showToast('Added to wishlist');
            } else {
                state.wishlist.splice(index, 1);
                showToast('Removed from wishlist');
            }
            
            saveWishlist();
            
            // Update wishlist button in product detail if this is the current product
            if (state.currentProduct && state.currentProduct.id === productId) {
                const wishlistBtn = document.getElementById('wishlistBtn');
                if (wishlistBtn) {
                    const isInWishlist = state.wishlist.includes(productId);
                    wishlistBtn.innerHTML = `<i class="${isInWishlist ? 'fas' : 'far'} fa-heart"></i>`;
                    wishlistBtn.classList.toggle('active', isInWishlist);
                }
            }
            
            // Re-render wishlist if on wishlist page
            if (document.getElementById('wishlistPage') && !document.getElementById('wishlistPage').classList.contains('hidden')) {
                renderWishlist();
            }
        }

        // Save wishlist to localStorage
        function saveWishlist() {
            localStorage.setItem('wishlist', JSON.stringify(state.wishlist));
        }

        // Render wishlist items
        function renderWishlist() {
            const container = document.getElementById('wishlistItems');
            const emptyContainer = document.getElementById('emptyWishlist');
            
            if (!container || !emptyContainer) return;
            
            container.innerHTML = '';
            
            if (state.wishlist.length === 0) {
                container.classList.add('hidden');
                emptyContainer.classList.remove('hidden');
            } else {
                container.classList.remove('hidden');
                emptyContainer.classList.add('hidden');
                
                state.wishlist.forEach(productId => {
                    const product = state.products.find(p => p.id === productId);
                    if (product) {
                        container.appendChild(createProductCard(product));
                    }
                });
            }
        }

        // Show product detail
        function showProductDetail(product) {
            state.currentProduct = product;
            
            document.getElementById('productDetailImage').src = product.image;
            document.getElementById('productDetailName').textContent = product.name;
            
            // Set price
            const priceElement = document.getElementById('productDetailPrice');
            if (product.originalPrice) {
                priceElement.innerHTML = `
                    <span class="product-detail-original">${product.originalPrice} ETB</span>
                    ${product.price} ETB
                    <span class="product-detail-discount">-${product.discount}%</span>
                `;
            } else {
                priceElement.innerHTML = `${product.price} ETB`;
            }
            
            // Set store info
            document.getElementById('productDetailStoreName').textContent = product.store;
            document.getElementById('productDetailStoreLocation').textContent = product.storeLocation;
            
            // Set wishlist button state
            const isInWishlist = state.wishlist.includes(product.id);
            const wishlistBtn = document.getElementById('wishlistBtn');
            wishlistBtn.innerHTML = `<i class="${isInWishlist ? 'fas' : 'far'} fa-heart"></i>`;
            wishlistBtn.classList.toggle('active', isInWishlist);
            
            // Set description
            document.getElementById('productDescription').innerHTML = product.description.replace(/\n/g, '<br>');
            
            // Set price comparison table
            const comparisonTable = document.getElementById('priceComparisonTable');
            if (comparisonTable) {
                comparisonTable.innerHTML = `
                    <thead>
                        <tr>
                            <th>Store</th>
                            <th>Price</th>
                            <th>Distance</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${product.priceComparison.map(store => `
                            <tr>
                                <td>${store.store}</td>
                                <td ${store.price === product.price ? 'class="best-price"' : ''}>${store.price} ETB</td>
                                <td>${store.distance}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                `;
            }
            
            // Hide all tabs except description
            document.getElementById('priceComparisonTab').classList.add('hidden');
            document.getElementById('reviewsTab').classList.add('hidden');
            document.getElementById('productDescription').classList.remove('hidden');
            
            // Reset tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector('.tab[data-tab="description"]').classList.add('active');
            
            navigateTo('productDetailPage');
        }

        // Show product tab
        function showProductTab(tabName) {
            // Hide all tab content
            document.getElementById('productDescription').classList.add('hidden');
            document.getElementById('priceComparisonTab').classList.add('hidden');
            document.getElementById('reviewsTab').classList.add('hidden');
            
            // Show selected tab content
            document.getElementById(`${tabName}Tab`).classList.remove('hidden');
            
            // Update active tab
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`.tab[data-tab="${tabName}"]`).classList.add('active');
        }

        // Save address
        function saveAddress() {
            const addressId = document.getElementById('addressId').value;
            const isDefault = document.getElementById('defaultAddress').checked;
            
            const address = {
                id: addressId || Date.now().toString(),
                name: document.getElementById('addressName').value,
                street: document.getElementById('streetAddress').value,
                city: document.getElementById('city').value,
                phone: document.getElementById('phone').value,
                isDefault: isDefault
            };
            
            // If this is the new default, unset any existing default
            if (isDefault) {
                state.addresses.forEach(a => a.isDefault = false);
            }
            
            // Update or add the address
            const existingIndex = state.addresses.findIndex(a => a.id === address.id);
            if (existingIndex >= 0) {
                state.addresses[existingIndex] = address;
            } else {
                // If this is the first address, make it default
                if (state.addresses.length === 0) {
                    address.isDefault = true;
                }
                state.addresses.push(address);
            }
            
            // If no default is set (and we have addresses), set the first one as default
            if (state.addresses.length > 0 && !state.addresses.some(a => a.isDefault)) {
                state.addresses[0].isDefault = true;
            }
            
            showToast('Address saved');
            renderAddresses();
            navigateTo('addressesPage');
        }

        // Remove address from list
        function removeAddressFromList(addressId) {
            state.addresses = state.addresses.filter(a => a.id !== addressId);
            
            // If we removed the default and have other addresses, set a new default
            if (state.addresses.length > 0 && !state.addresses.some(a => a.isDefault)) {
                state.addresses[0].isDefault = true;
            }
            
            showToast('Address removed');
            renderAddresses();
        }

        // Render addresses
        function renderAddresses() {
            const container = document.getElementById('addressList');
            if (!container) return;
            
            container.innerHTML = '';
            
            state.addresses.forEach(address => {
                const addressCard = document.createElement('div');
                addressCard.className = 'address-card';
                addressCard.setAttribute('data-address-id', address.id);
                
                let defaultBadge = '';
                if (address.isDefault) {
                    defaultBadge = '<span class="address-default">Default</span>';
                }
                
                addressCard.innerHTML = `
                    ${defaultBadge}
                    <h3 class="address-name">${address.name}</h3>
                    <div class="address-details">
                        <p>${address.street}</p>
                        <p>${address.city}</p>
                        <p class="address-phone">${address.phone}</p>
                    </div>
                    <div class="address-actions">
                        <a href="#" class="address-action">Edit</a>
                        <a href="#" class="address-action">Remove</a>
                    </div>
                `;
                
                container.appendChild(addressCard);
            });
        }

        // Render checkout
        function renderCheckout() {
            // Set selected address (default to the default address)
            const defaultAddress = state.addresses.find(a => a.isDefault) || state.addresses[0];
            renderSelectedAddress(defaultAddress);
            
            // Set payment method
            selectPaymentMethod(state.paymentMethod);
            
            // Update order summary
            const subtotal = state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const delivery = 25; // Fixed delivery fee for demo
            const total = subtotal + delivery;
            
            document.getElementById('checkoutSubtotal').textContent = `${subtotal} ETB`;
            document.getElementById('checkoutDelivery').textContent = `${delivery} ETB`;
            document.getElementById('checkoutTotal').textContent = `${total} ETB`;
        }

        // Render selected address
        function renderSelectedAddress(address) {
            const container = document.getElementById('selectedAddress');
            if (!container) return;
            
            container.innerHTML = `
                <p><strong>${address.name}</strong></p>
                <p>${address.street}</p>
                <p>${address.city}</p>
                <p class="address-phone">${address.phone}</p>
            `;
        }

        // Select payment method
        function selectPaymentMethod(method) {
            state.paymentMethod = method;
            
            document.querySelectorAll('.payment-radio').forEach(radio => {
                radio.classList.remove('selected');
            });
            
            document.querySelector(`.payment-method[data-payment="${method}"] .payment-radio`).classList.add('selected');
        }

        // Place order
        function placeOrder() {
            if (state.cart.length === 0) {
                showToast('Your cart is empty');
                return;
            }
            
            const defaultAddress = state.addresses.find(a => a.isDefault) || state.addresses[0];
            if (!defaultAddress) {
                showToast('Please add a delivery address');
                navigateTo('addressesPage');
                return;
            }
            
            // Create new order
            const orderId = Math.floor(10000 + Math.random() * 90000).toString();
            const subtotal = state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const delivery = 25; // Fixed delivery fee for demo
            const total = subtotal + delivery;
            
            const now = new Date();
            const hours = now.getHours();
            const minutes = now.getMinutes();
            const ampm = hours >= 12 ? 'PM' : 'AM';
            const formattedHours = hours % 12 || 12;
            const formattedMinutes = minutes < 10 ? '0' + minutes : minutes;
            
            const orderDate = `Today, ${formattedHours}:${formattedMinutes} ${ampm}`;
            
            // Estimate delivery time (1-2 hours from now)
            const deliveryHours = (hours + 1 + Math.floor(Math.random() * 2)) % 24;
            const deliveryAmpm = deliveryHours >= 12 ? 'PM' : 'AM';
            const deliveryFormattedHours = deliveryHours % 12 || 12;
            const deliveryTime = `Today, ${deliveryFormattedHours}:00-${(deliveryFormattedHours + 1) % 12 || 12}:00 ${deliveryAmpm}`;
            
            const newOrder = {
                id: orderId,
                date: orderDate,
                status: 'processing',
                items: [...state.cart],
                subtotal: subtotal,
                delivery: delivery,
                total: total,
                payment: state.paymentMethod,
                address: defaultAddress.id,
                statusSteps: [
                    { label: 'Order Confirmed', description: orderDate, status: 'completed' },
                    { label: 'Preparing Order', description: '', status: 'active' },
                    { label: 'On the Way', description: '', status: '' },
                    { label: 'Delivered', description: '', status: '' }
                ]
            };
            
            state.orders.unshift(newOrder);
            state.currentOrder = newOrder;
            
            // Clear cart
            state.cart = [];
            saveCart();
            updateCartBadge();
            
            // Show order confirmation
            showOrderConfirmation(newOrder, deliveryTime);
        }

        // Show order confirmation
        function showOrderConfirmation(order, deliveryTime) {
            document.getElementById('orderNumber').textContent = order.id;
            document.getElementById('deliveryTime').textContent = deliveryTime;
            
            let paymentMethod = '';
            switch(order.payment) {
                case 'cod':
                    paymentMethod = 'Cash on Delivery';
                    break;
                case 'card':
                    paymentMethod = 'Credit/Debit Card';
                    break;
                case 'mobile':
                    paymentMethod = 'Mobile Payment';
                    break;
            }
            
            document.getElementById('paymentMethod').textContent = paymentMethod;
            document.getElementById('orderTotal').textContent = `${order.total} ETB`;
            
            navigateTo('orderConfirmationPage');
        }

        // Show order